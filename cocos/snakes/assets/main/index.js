System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SnakeController.ts"],(function(e){"use strict";var n,t,o,r,i,a,s,l,c,u,h,f,d,p,g,m,C,k;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,l=e.Node,c=e.profiler,u=e.instantiate,h=e.Contact2DType,f=e.Sprite,d=e.UITransform,p=e.Vec3,g=e.math,m=e.Color,C=e.Component},function(e){k=e.SnakeController}],execute:function(){var b,y,v,I,w,P,z,F,G,R,S;i._RF.push({},"ffa19FL+ANNwIxvlIpIeoZS","GameManager",void 0);var N=a.ccclass,B=a.property;e("GameManager",(b=N("GameManager"),y=B(s),v=B(s),I=B(l),w=B(k),b((F=n((z=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,o(n,"snakePrefab",F,r(n)),o(n,"foodPrefab",G,r(n)),n.snake=null,n.food=null,o(n,"joystick",R,r(n)),o(n,"snakeController",S,r(n)),n}t(n,e);var i=n.prototype;return i.start=function(){var e=this;c.hideStats(),this.snake=u(this.snakePrefab),this.node.addChild(this.snake),this.createFood(),this.snakeController=this.snake.getComponent(k),this.snake.on(h.BEGIN_CONTACT,this.onBeginContact,this),this.snake.on("over",this.onGameOver,this),this.joystick.on("move",(function(n){return e.snakeController.setDir(n)}))},i.update=function(e){},i.onGameOver=function(){alert("游戏结束，请重新开始！"),this.snakeController.reset(),this.food.destroy(),this.createFood()},i.onBeginContact=function(e,n){var t=this;-1===n.tag&&(this.food.destroy(),this.snakeController.getNewBody(this.food.getComponentInChildren(f).color),this.schedule((function(){t.createFood()}),1,0))},i.createFood=function(){var e=u(this.foodPrefab),n=this.getComponent(d).contentSize,t=n.width,o=n.height;t-=250,o-=100,e.setPosition(new p(g.randomRange(-t/2,t/2),g.randomRange(-o/2,o/2),0)),e.getComponentInChildren(f).color=this.randomColor(),this.food=e,this.node.addChild(e)},i.randomColor=function(){var e=g.randomRangeInt(10,255),n=g.randomRangeInt(10,255),t=g.randomRangeInt(10,255);return new m(e,n,t,255)},n}(C)).prototype,"snakePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(z.prototype,"foodPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(z.prototype,"joystick",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(z.prototype,"snakeController",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=z))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/JoystickController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,e,i,s,r,c,h,a,l,u,p,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,h=t.Input,a=t.UITransform,l=t.Vec3,u=t.Vec2,p=t.Graphics,d=t.Component}],execute:function(){var v,f,T,y,C;s._RF.push({},"fae74sQQKJCU6WctNlsg7vj","JoystickController",void 0);var b=r.ccclass,g=r.property;t("JoystickController",(v=b("JoystickController"),f=g(c),v((C=n((y=function(t){function n(){for(var n,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,e(n,"btn",C,i(n)),n}o(n,t);var s=n.prototype;return s.start=function(){this.draw(),this.drawBtn(),this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.update=function(t){var n=this.btn.position.length(),o=this.getComponent(a).contentSize.width/2;n>o&&this.btn.setPosition(this.btn.position.divide(new l(n/o,n/o,1)))},s.onTouchStart=function(t){var n=this.getComponent(a).convertToNodeSpaceAR(new l(t.getUILocation().x,t.getUILocation().y));this.btn.setPosition(n)},s.onTouchMove=function(t){var n=t.getDelta();this.btn.setPosition(this.btn.position.add(new l(n.x,n.y))),this.node.emit("move",new u(this.btn.position.x,this.btn.position.y).normalize())},s.onTouchEnd=function(){this.btn.setPosition(new l(0,0))},s.onTouchCancel=function(){this.btn.setPosition(new l(0,0))},s.draw=function(){var t=this.getComponent(a),n=this.getComponent(p);n.clear(),n.circle(0,0,t.contentSize.width/2),n.close(),n.stroke()},s.drawBtn=function(){var t=this.btn.getComponent(a),n=this.btn.getComponent(p);n.clear(),n.circle(0,0,t.contentSize.width/2),n.close(),n.fill()},n}(d)).prototype,"btn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=y))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManager.ts","./JoystickController.ts","./SnakeController.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SnakeController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,o,s,e,h,r,d,a,l,y,p,u,c,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){e=t.cclegacy,h=t._decorator,r=t.Prefab,d=t.instantiate,a=t.Collider2D,l=t.Contact2DType,y=t.Vec3,p=t.Vec2,u=t.UITransform,c=t.Sprite,b=t.Component}],execute:function(){var f,g,x,v,C,L,P;e._RF.push({},"fedf8KTQvFKjbjtuKIeLyTI","SnakeController",void 0);var I=h.ccclass,w=h.property,m=20;t("SnakeController",(f=I("SnakeController"),g=w(r),x=w(r),f((L=i((C=function(t){function i(){for(var i,n=arguments.length,e=new Array(n),h=0;h<n;h++)e[h]=arguments[h];return i=t.call.apply(t,[this].concat(e))||this,o(i,"snakeHead",L,s(i)),o(i,"snakeBody",P,s(i)),i.dir=new p(0,0),i.head=null,i.bodyList=[],i.points=[],i.headPointsCount=0,i.bodyPointsIndex=0,i.isOver=!1,i}n(i,t);var e=i.prototype;return e.start=function(){var t=d(this.snakeHead);this.node.addChild(t),this.head=t,this.head.getComponent(a).on(l.BEGIN_CONTACT,this.onBeginContact,this)},e.reset=function(){this.head.setPosition(new y(0,0,0)),this.bodyList.forEach((function(t){return t.destroy()})),this.bodyList=[],this.points=[],this.headPointsCount=0,this.bodyPointsIndex=0,this.dir=new p(0,0),this.isOver=!1},e.update=function(t){this.move()},e.onBeginContact=function(t,i,n){this.node.emit(l.BEGIN_CONTACT,t,i,n)},e.setDir=function(t){this.isOver||(this.dir=t)},e.move=function(){if(!this.isOver){var t=this.node.parent.getComponent(u).contentSize,i=t.width,n=t.height,o=this.head.position,s=o.x,e=o.y;(s+10>=i/2||s-10<=-i/2||e+10>=n/2||e-10<=-n/2)&&(this.isOver=!0,this.node.emit("over"));var h=new p(this.head.position.x+1*this.dir.x,this.head.position.y+1*this.dir.y);if(this.points.splice(this.headPointsCount,0,h),this.head.setPosition(new y(h.x,h.y,0)),this.headPointsCount++,this.bodyList.length){for(var r=(this.points.length-this.headPointsCount)/this.bodyList.length,d=0;d<this.bodyList.length;d++){var a=r*d+this.headPointsCount+this.bodyPointsIndex,l=this.points[a];this.bodyList[d].setPosition(new y(l.x,l.y,0))}this.bodyPointsIndex++,this.bodyPointsIndex>r-1&&(this.points.length-=r,this.bodyPointsIndex=0,this.headPointsCount-=r)}}},e.getNewBody=function(t){var i=this,n=d(this.snakeBody);if(0===this.bodyList.length){var o=this.head.position.x-this.dir.x*m,s=this.head.position.y-this.dir.y*m;n.setPosition(new y(o,s,0))}else{var e=this.bodyList[this.bodyList.length-1],h=this.bodyList.length>1?this.bodyList[this.bodyList.length-2]:this.head,r=new p(h.position.x-e.position.x,h.position.y-e.position.y).normalize(),a=e.position.x-r.x*m,l=e.position.y-r.y*m;n.setPosition(new y(a,l,0))}t&&(n.getComponentInChildren(c).color=t),this.node.addChild(n),this.bodyList.push(n),this.head.setSiblingIndex(this.node.children.length),this.bodyList.forEach((function(t,n){t.setSiblingIndex(i.bodyList.length-n-1)})),this.getPoints()},e.getPoints=function(){if(this.bodyList.length)for(var t=0;t<m;){t+=1;var i=this.bodyList[this.bodyList.length-1],n=this.bodyList.length>1?this.bodyList[this.bodyList.length-2]:this.head,o=new p(n.position.x-i.position.x,n.position.y-i.position.y).normalize(),s=i.position.x-o.x*this.bodyPointsIndex*1+o.x*t,e=i.position.y-o.y*this.bodyPointsIndex*1+o.y*t;this.points.push(new p(s,e))}},i}(b)).prototype,"snakeHead",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(C.prototype,"snakeBody",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});